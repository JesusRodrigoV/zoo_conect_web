<zoo-main-container>
  <p-card class="crear-form-card">
    <ng-template pTemplate="header">
      <div class="card-header">
        <h2>Crear Nuevo Hábitat</h2>
        <p class="subtitle">Ingresa los datos del nuevo hábitat</p>
      </div>
    </ng-template>

    <form [formGroup]="habitatForm" (ngSubmit)="onSubmit()" class="form">
      <div class="form-section">
        <h4>Información del Hábitat</h4>
        <div class="form-grid">
          
          <div class="field">
            <p-floatlabel>
              <input
                id="nombre"
                pInputText
                type="text"
                formControlName="nombre"
                autocomplete="off"
              />
              <label for="nombre">Nombre del Hábitat</label>
            </p-floatlabel>
            @if (isInvalid('nombre')) {
              <ng-container
                [ngTemplateOutlet]="alerta"
                [ngTemplateOutletContext]="{ fieldName: 'nombre' }"
              />
            }
          </div>

          <div class="field">
            <p-floatlabel>
              <input
                id="tipo"
                pInputText
                type="text"
                formControlName="tipo"
                autocomplete="off"
              />
              <label for="tipo">Tipo de Hábitat</label>
            </p-floatlabel>
            @if (isInvalid('tipo')) {
              <ng-container
                [ngTemplateOutlet]="alerta"
                [ngTemplateOutletContext]="{ fieldName: 'tipo' }"
              />
            }
          </div>

          <div class="field">
            <p-floatlabel>
              <textarea
                pTextarea
                id="descripcion"
                rows="4"
                formControlName="descripcion"
                [autoResize]="true"
              ></textarea>
              <label for="descripcion">Descripción</label>
            </p-floatlabel>
            @if (isInvalid('descripcion')) {
              <ng-container
                [ngTemplateOutlet]="alerta"
                [ngTemplateOutletContext]="{ fieldName: 'descripcion' }"
              />
            }
          </div>

          <div class="field">
            <p-floatlabel>
              <textarea
                pTextarea
                id="condicionesClimaticas"
                rows="3"
                formControlName="condicionesClimaticas"
                [autoResize]="true"
              ></textarea>
              <label for="condicionesClimaticas">Condiciones Climáticas</label>
            </p-floatlabel>
            @if (isInvalid('condicionesClimaticas')) {
              <ng-container
                [ngTemplateOutlet]="alerta"
                [ngTemplateOutletContext]="{ fieldName: 'condicionesClimaticas' }"
              />
            }
          </div>
        </div>
      </div>

      <div class="form-actions">
        <p-button
          type="submit"
          [label]="isCreating() ? 'Creando...' : 'Crear Hábitat'"
          [icon]="isCreating() ? 'pi pi-spin pi-spinner' : 'pi pi-save'"
          [disabled]="isCreating()"
          [rounded]="true"
        />
        
        <p-button
          type="button"
          label="Cancelar"
          icon="pi pi-times"
          severity="secondary"
          [outlined]="true"
          (click)="onCancel()"
          [disabled]="isCreating()"
          [rounded]="true"
        />
      </div>
    </form>
    
  </p-card> <ng-template #alerta let-fieldName="fieldName">
    <p-message severity="error" size="small" variant="simple">
      {{ getErrorMessage(fieldName) }}
    </p-message>
  </ng-template>

</zoo-main-container>