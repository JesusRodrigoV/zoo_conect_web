<div class="login-page-container">
  <p-card styleClass="login-card">
    <div class="card-content">
      <div class="login-image-container">
        <img
          ngSrc="/assets/images/registro.png"
          alt="Imagen de un tigre"
          width="600"
          height="400"
          priority
        />
      </div>

      <div class="login-form-container">
        <div class="login-header">
          <app-logo-image />
          <h1>Crea tu Cuenta en {{ authStore.nombreMarca() }}</h1>
          <p class="subtitle">Regístrate para explorar</p>
        </div>

        @defer(on viewport; prefetch on idle; hydrate on viewport) {
        <div class="login-content">
          <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
            <div class="field">
              <p-floatlabel variant="on">
                <input
                  id="email"
                  pInputText
                  type="email"
                  formControlName="email"
                  placeholder="Ingresa tu email"
                  [style]="{ width: '100%' }"
                  autocomplete="email"
                />
                <label for="email">Email</label>
              </p-floatlabel>
              @if (getEmailError(); as error) {
              <p-message severity="error" variant="simple" size="small">
                {{ error }}
              </p-message>
              }
            </div>

            <div class="field">
              <p-floatlabel variant="on">
                <input
                  id="username"
                  pInputText
                  type="text"
                  formControlName="username"
                  placeholder="Ingresa tu nombre de usuario"
                  [style]="{ width: '100%' }"
                  autocomplete="username"
                />
                <label for="username">Usuario</label>
              </p-floatlabel>
              @if (getUsernameError(); as error) {
              <p-message severity="error" variant="simple" size="small">
                {{ error }}
              </p-message>
              }
            </div>

            <div class="field">
              <p-floatlabel variant="on">
                <p-password
                  id="password"
                  formControlName="password"
                  placeholder="Ingresa tu contraseña"
                  [feedback]="true"
                  [toggleMask]="true"
                  autocomplete="new-password"
                  [style]="{ width: '100%' }"
                  promptLabel="Al menos 6 caracteres, una letra mayúscula, una letra minúscula y un número"
                  weakLabel="Contraseña débil"
                  mediumLabel="Contraseña media"
                  strongLabel="Contraseña fuerte"
                />
                <label for="password">Contraseña</label>
              </p-floatlabel>
            </div>

            <div class="field">
              <p-floatlabel variant="on">
                <p-password
                  id="confirmPassword"
                  formControlName="confirmPassword"
                  placeholder="Confirma tu contraseña"
                  [feedback]="false"
                  [toggleMask]="true"
                  autocomplete="new-password"
                  [style]="{ width: '100%' }"
                />
                <label for="confirmPassword">Confirmar Contraseña</label>
              </p-floatlabel>
              @if (getConfirmPasswordError(); as error) {
              <p-message severity="error" variant="simple" size="small">
                {{ error }}
              </p-message>
              }
            </div>

            <div class="button-container">
              <p-button
                type="submit"
                severity="primary"
                [rounded]="true"
                [disabled]="isLoading()"
                styleClass="login-button w-full"
              >
                @if (isLoading()) {
                <zoo-loader
                  [size]="20"
                  [color]="'var(--p-primary-contrast-color)'"
                />
                } @else { Crear Cuenta }
              </p-button>
            </div>
          </form>

          <p class="signup-link">
            ¿Ya tienes cuenta?
            <a routerLink="/login">Inicia sesión aquí</a>
          </p>
        </div>
        } @placeholder {
        <div class="login-placeholder">
          <p>Cargando formulario de registro...</p>
        </div>
        }
      </div>
    </div>
  </p-card>
</div>
